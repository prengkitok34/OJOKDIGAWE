<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Email @mailxstres.org</title>
  <style>
    body { background: #111; color: #fff; font-family: sans-serif; text-align: center; }
    #inbox { margin-top: 20px; background: #222; padding: 20px; border-radius: 8px; max-width: 700px; margin-left: auto; margin-right: auto; }
    button { margin: 5px; padding: 5px 10px; }
    input { padding: 5px; width: 200px; text-align: center; }
  </style>
</head>
<body>
  <h2>📧 Email <b>@mailxstres.org</b></h2>
  <input id="user" placeholder="username">
  <button onclick="copyEmail()">📋 Salin Alamat</button>

  <div id="inbox"><b>Inbox</b><br><span id="status" style="color:red"></span></div>

  <script>
    function copyEmail() {
      let user = document.getElementById("user").value;
      let email = user + "@mailxstres.org";
      navigator.clipboard.writeText(email);
      alert("Disalin: " + email);
    }

    function loadInbox() {
      let user = document.getElementById("user").value;
      if (!user) return;

      fetch("http://203.161.55.116//inbox.php?user=" + user) // ← ganti IP kamu
        .then(r => r.json())
        .then(data => {
          let inbox = document.getElementById("inbox");
          inbox.innerHTML = "<b>Inbox</b><br>";
          if (data.error) {
            inbox.innerHTML += "<span style='color:red'>" + data.error + "</span>";
            return;
          }
          if (data.length == 0) {
            inbox.innerHTML += "<i>Inbox kosong</i>";
            return;
          }
          data.forEach(e => {
            inbox.innerHTML += `
              <div style="text-align:left;margin:10px 0;padding:10px;border:1px solid #444;border-radius:5px">
                <b>Dari:</b> ${e.from}<br>
                <b>Subjek:</b> ${e.subject}<br>
                <b>Tanggal:</b> ${e.date}<br>
                <b>OTP:</b> ${e.otp || '-'} 
                <button onclick="navigator.clipboard.writeText('${e.otp}')">Salin</button>
              </div>
            `;
          });
        });
    }

    setInterval(loadInbox, 3000);
  </script>
</body>
</html>
